<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>分级基金A份定价问题 &mdash; 分级A份Monte Carlo模拟定价C++实现 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="分级A份Monte Carlo模拟定价C++实现 0.1 documentation" href="index.html" />
    <link rel="next" title="QEPM模型" href="QEPM.html" />
    <link rel="prev" title="关于本文档" href="README.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="QEPM.html" title="QEPM模型"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="README.html" title="关于本文档"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">分级A份Monte Carlo模拟定价C++实现 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a">
<span id="index-0"></span><h1>分级基金A份定价问题<a class="headerlink" href="#a" title="Permalink to this headline">¶</a></h1>
<p>对分级基金A份因为其存在不定期折算，可以通过Monte Carlo随机模拟对其理论价格进行估算。
分级基金向下折算时，部分A份份额将转化为母基金，我们视这个转化为一个现金流。
通过对下折事件的Monte Carlo模拟，我们测算出这个现金流来估算分级A的理论价格。</p>
<ul class="simple">
<li>我们大概需要模拟100只左右的分级基金，重点研究其中30-40只。</li>
<li>研究过程中需要考虑分级基金之间的相关性。</li>
<li>假设按照周频模拟15年，100只基金，1000条路径。总计算规模是 <span class="math">\(10^8\)</span> . 经过我C++程序测算生成 <span class="math">\(10^8\)</span> 个满足正态分布的随机数需要30s左右的时间。测算环境为我的笔记本CPU是1.4 GHz Intel Core i5。 可以估计出跑一遍这个模拟应该可以在几分钟内完成。</li>
</ul>
<div class="section" id="index-1">
<span id="id1"></span><h2>必要假设<a class="headerlink" href="#index-1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>母基金按照一定持仓量严格跟踪其标的指数。假定持仓量为90%</li>
<li>标的指数收益服从正态分布。</li>
<li>假设其约定收益维持在一定水平不变。</li>
<li>基金各项费用保持不变。</li>
<li>就一次模拟而言，各个基金之间的相关性矩阵不变。</li>
<li>相关性矩阵和预期收益由 QEPM模型给出。</li>
</ol>
</div>
<div class="section" id="id2">
<h2>模拟步骤<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>对于每一个交易日(或者一周), 我们按照下面步骤来完成一个迭代步:</p>
<ol class="arabic simple">
<li>根据基金条款第一次判断是否上下折算, 如果需要折算计算相关净值.</li>
<li>基于母基金单位净值随机游走的假设，通过下式模拟出 <span class="math">\(N\)</span> 条母基金净值未来走势路径:</li>
</ol>
<div class="math">
\[S_t = S_{t-1}e^{(r - \delta - \frac{1}{2} \sigma^2) \Delta t + \sigma \sqrt{\Delta t} \epsilon}\]</div>
<p>其中，</p>
<ul class="simple">
<li><span class="math">\(S_t\)</span> 为 <span class="math">\(t-1\)</span> 日的母基金净值；</li>
<li><span class="math">\(r\)</span> 为母基金预期收益率，由QEPM模型给出；</li>
<li><span class="math">\(\delta\)</span> 为基金各项费用；</li>
<li><span class="math">\(\sigma\)</span> 为母基金单位净值收益率的年华波动率，由QEPM模型给出；</li>
<li><span class="math">\(\epsilon\)</span> 为服从标准正态分布 <span class="math">\(N(0,1)\)</span> 的随机变量；</li>
<li><span class="math">\(\Delta t\)</span> 取 <span class="math">\(\frac{1}{252}\)</span> 假设一年实际交易天数为 <span class="math">\(252\)</span> 日。</li>
</ul>
<ol class="arabic simple" start="3">
<li>对于每一条路径，根据母基金净值计算每一个交易日的优先份额净值与进取份额净值。</li>
</ol>
<div class="math">
\[NAV_A=(1+R)^{t/N}\]</div>
<div class="math">
\[NAV_B=\frac{NAV_m - 0.5 NAV_A}{0.5}\]</div>
<p>其中 <span class="math">\(t = \min\{年初至T日，自基金合同生效日至T日，自最近一次会计年度内份额折算日至T日\}\)</span> ;</p>
<ul class="simple">
<li>R为约定收益率</li>
<li>N为当年实际交易天数</li>
</ul>
<blockquote>
<div>PS: 这里只是一个例子，并不一定所有分级A净值都以复利计算，有可能是单利。分级B杠杆也不一定是两倍。</div></blockquote>
<ol class="arabic simple" start="4">
<li>再次判断以及计算上下折算. (有的分级A是在开始前判断上下折算，有的是在计算完净值后. )</li>
<li>计算此步统计量。</li>
</ol>
<p>完成一条路径模拟之后，需要计算一下这条路径的总体统计量。完成所有路径模拟之后, 需要再算一次总体统计量。</p>
<p>我们同时模拟多个分级基金，分级基金之间有相关性，生成 <span class="math">\(\epsilon\)</span> 的时候需要考虑其相关性。</p>
</div>
<div class="section" id="id3">
<h2>上下折算的若干问题<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>我们需要注意分级基金之间上下折算的触发规则一般略有不同。除此之外，还有下面这个问题需要在模型中考虑。</p>
<div class="section" id="id4">
<h3>问题不在下折，而在溢价<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://mp.weixin.qq.com/s?__biz=MzA4NjE5NzgwMg==&amp;mid=212752344&amp;idx=1&amp;sn=287e6810bfb32e03bed58c557a210796&amp;scene=1&amp;key=0acd51d81cb052bcc465767c189dacb654fdad37b20f39607bb244488f4fedef6a002eb06fea390273d58847f8aacd95&amp;ascene=0&amp;uin=NTU3ODAwNQ%3D%3D&amp;devicetype=iMac+MacBookAir6%2C2+OSX+OSX+10.10.3+build(14D136)&amp;version=11020012&amp;pass_ticket=IwX3RnjNrmnR22N4OpExt5sUNCO9DJR8PbQ4SG%2FDukU%3D">原文链接</a></p>
<p>第一财经日报 郭璐庆</p>
<p>从场外的配资到场内的两融，这轮暴跌行情中“去杠杆”成为新常态，同样带有杠杆性质的分级基金成为重灾区之一。加之日前转债进取(150189)下折创下亏损84%的历史惨案，分级B一度成为投资者不敢逾越的禁区，甚至达到“谈下折色变”的地步。</p>
<p>“我正想说这个问题。”华西证券金融产品研究评价中心负责人刘明军称，下折的问题很有必要及时说清，否则投资者的误解会越来越大。</p>
<p>近期分级基金大面积下折，出于保护A份额而制定的下折机制却在暴跌行情中导致部分投资者巨亏，抛开目前下折尚待改进的机制不谈，投资者教育在分级基金的缺失是非常重要的一个因素。</p>
<p>15日、16日，基金业协会官方微信连续两日推送了分级基金讲堂，讲解分级知识。一位基金业人士告诉《第一财经日报》记者，现在很多分级基金面临下折，十分有必要进行投资者教育。</p>
<p>下折逻辑</p>
<p>分级基金的实质是B份额通过向A份额“借钱”投资于母基金，从而获得杠杆效应。A份额的约定收益就是B份额需要支付的利息。</p>
<p>通常来说，当分级B的净值跌到0.25元(可转债是0.45元)及以下时，就会触发向下折算，A、B份额的净值都会变为1。这个过程是，B的净值从0.25元折算成1元，保持净资产不变，份额对应缩小到1/4。而分级A与分级B份额要维持1：1，所以1元净值的分级A也要跟着将份额缩成1/4。分级A剩下的3/4以母基金形式返还给投资者。</p>
<p>实际上，下折是分级基金合同规定的一项保护A份额持有人利益的条款。</p>
<p>“下折条款首先保护了A份额持有人的利益。随着B份额的净值不断下降且杠杆越来越大，如不下折，B的净值可能跌至0甚至跌穿，无法保障A份额的本金和利息安全。”刘明军告诉记者，其次是下折后，B份额的杠杆也得以减小，这将降低若后市进一步下跌给B份额持有人带来的净值加速下跌的风险。</p>
<p>这就意味着，分级基金下跌太多而不采取下折措施，杠杆越来越高，大盘若继续下跌，将导致A的约定收益无法获取。</p>
<p>很多案例中，分级B持有者会出现较大损失的主要原因则是因为跌停板制度制约了分级B的价格随母基金下跌，造成很高的扭曲溢价，导致被动溢价越来越高甚至超过100%——而这个时候，就非常危险了。</p>
<p>“本来价格跟着净值走，合理情况下应该保持稳定的折价或溢价，而接近下折时溢价越来越高。大跌时净值跌得很快可能导致价格跟不上净值下跌的速度，接近下折(原文此处为下跌应为手误)时杠杆约有5倍，意味着标的指数跌2%以上它就跌10%以上。但是由于有跌停板限制跌不了10%以上，导致被动溢价越来越高，最终导致溢价超过100%。”刘明军解释道。</p>
<p>进一步举例假设，某一分级B的净值是10万，溢价100%后市价变为20万，当下折后净值变为1，但资产还是10万，而这个时候由于失去了5倍的杠杆，最多只有20%的溢价，即市价变成了12万。所以下折后，投资者的亏损将达到40%。</p>
<p>问题不在“折”而在溢价</p>
<p>“其实问题的核心不在于是否下折，而是是否有高溢价。”深圳一位公募基金公司人士表示。</p>
<p>这也得到了刘明军的认同。“如果下折前溢价没那么高，下折条款触发后，并不会产生市值的缩水，下折前后并不会有大幅的亏损。”他说。</p>
<p>所以在刘明军看来，如果不是市场连续暴跌，B份额是不可能产生超过100%的溢价，也就不可能造成巨额的亏损。</p>
<p>在转债进取下折的案例中，截至2015年7月7日，转债进取份额收盘价为0.638元，溢价率高达101.26%，这也就最后导致了超过80%的亏损。同样，在不定期份额折算后其杠杆倍数将大幅降低，恢复到初始杠杆水平，其溢价率便大幅降低。</p>
<p>“下折或者不下折，一定要关心的指标是整体溢价包括B的溢价。整体溢价是最核心的，高了就小心，B的溢价高了也会产生问题。”上述深圳公募基金公司人士说。</p>
<p>“之所以这次下折造成B类持有人巨亏，关键是因为这次股市连续暴跌造成流动性问题，基金净值损失过快，跌停板制度，两者结合起来造成基金的大幅溢价，折算后由于杠杆的大幅降低，溢价也大幅降低，从而造成折算前后B类投资者市值大幅缩水。”刘明军表示。</p>
<p>简单来说，在下折附近投资分级B要“三规避”：一是规避整体溢价率过高的分级B;二是规避分级A折价率高、分级B溢价率过高的分级B;第三个则是规避母基金短期存在下行风险的分级B。</p>
<p>最新数据提示，现在需要注意下折风险的分级B有六只，分别是一带B、同瑞B、转债B级、工业4B、电子B和国企改B，溢价率依次是4.31%、22.75%、40.13%、44.38%、13.31%和45.62%。</p>
<p>母基金整体溢价率最高的则是工业4和国企改革，母基金溢价率达到了4.49%和4.32%。</p>
<p>另外，对于高溢价的转债B级、工业4B和国企改B，触发下折需要母基金跌幅分别是6.76%、7.46%和9.19%。</p>
<p>“分级基金只是工具，本身没有好坏，关键是要搞懂，不懂不要乱买，已经下折还去买就太不划算了。客观地说，如果行情不好，最好的办法就是不要做B，这不是下折不下折的问题。”深圳一位公募基金公司人士直言道。</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">分级基金A份定价问题</a><ul>
<li><a class="reference internal" href="#index-1">必要假设</a></li>
<li><a class="reference internal" href="#id2">模拟步骤</a></li>
<li><a class="reference internal" href="#id3">上下折算的若干问题</a><ul>
<li><a class="reference internal" href="#id4">问题不在下折，而在溢价</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="README.html"
                        title="previous chapter">关于本文档</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="QEPM.html"
                        title="next chapter">QEPM模型</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/model.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="QEPM.html" title="QEPM模型"
             >next</a> |</li>
        <li class="right" >
          <a href="README.html" title="关于本文档"
             >previous</a> |</li>
        <li><a href="index.html">分级A份Monte Carlo模拟定价C++实现 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, 叶时炜.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>