<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>算法 &mdash; 分级A份Monte Carlo模拟定价C++实现 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="分级A份Monte Carlo模拟定价C++实现 0.1 documentation" href="index.html" />
    <link rel="prev" title="模拟程序结构设计" href="design.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="design.html" title="模拟程序结构设计"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">分级A份Monte Carlo模拟定价C++实现 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>算法<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="n">
<h2>生成满足正态分布的N维度随机变量<a class="headerlink" href="#n" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>算法<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>设 <span class="math">\(N\)</span> 维随机变量 <span class="math">\(Z\)</span> 的每个分量是满足 <span class="math">\(\mu=0\)</span> , <span class="math">\(\sigma=1\)</span> 的独立正态分布随机变量。
则可以由 <span class="math">\(x=R+Z*A\)</span> , <span class="math">\(A=chol(\Sigma)\)</span> 生成均值为 <span class="math">\(R\)</span>, 协方差矩阵为 <span class="math">\(\Sigma\)</span> 的N维随机变量。
这里chol为 <a class="reference external" href="https://en.wikipedia.org/wiki/Cholesky_decomposition">Cholesky分解</a> 。</p>
<p>PS: 这里需要注意的一个问题是生成的随机数列 <span class="math">\(Z\)</span> 必须是独立的，这是程序实现过程中很容易犯的一个错误。</p>
</div>
<div class="section" id="c">
<h3>C++程序实现<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h3>
<p>我利用C++11 的新特性 <a class="reference external" href="http://www.cplusplus.com/reference/random/normal_distribution/">生成正态分布随机数列</a> .
为了使得所生成的 <span class="math">\(Z\)</span> 相互独立，我用 <span class="math">\(t F(n)\)</span> 来做随机数生成器的种子。这里 <span class="math">\(t\)</span> 是一个和时间相关的整数，
而 <span class="math">\(F(n)\)</span> 是 <a class="reference external" href="https://en.wikipedia.org/wiki/Fibonacci_number">斐波那契数列(Fibonacci Number)</a> .
显然，为了每个种子不一样, <span class="math">\(F(n)\)</span> 必须从 <span class="math">\(1,2,3,5..\)</span> 开始，而不是从 <span class="math">\(0\)</span> 开始。</p>
</div>
</div>
<div class="section" id="id4">
<h2>各种统计量的计算方法<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Monte Carlo模拟完成之后, 我们需要计算如下统计量:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li>每个基金的 <a class="reference external" href="https://en.wikipedia.org/wiki/Mean">平均</a> 第一次下折日;</li>
<li>第一向上折算日 <a class="reference external" href="https://en.wikipedia.org/wiki/Frequency_distribution">频数分布</a> ;</li>
<li>第一向下折算日频数分布;</li>
<li>折算日 <a class="reference external" href="https://en.wikipedia.org/wiki/Truncated_mean">截尾均值</a> ;</li>
<li>折算日25% <a class="reference external" href="https://en.wikipedia.org/wiki/Quantile">分位数</a> , 50%分位数, 75%分位数, 与90%分位数;</li>
<li>A基金优先份额久期分析;</li>
<li>计算隐含收益率;</li>
</ol>
</div></blockquote>
<p>其中前五项 a b c d e 都是常见统计量无需在这里赘述.</p>
<div class="section" id="macaulay-duration">
<h3>基金优先份额久期(Macaulay Duration)分析<a class="headerlink" href="#macaulay-duration" title="Permalink to this headline">¶</a></h3>
<p>我们可以通过模拟永续分级基金优先份额现金流实现的金额与日期, 结合修正久期的定义, 得出其修正久期.</p>
<div class="math">
\[Macualay\ Duration = \frac{\Sigma_{t=1}^{n}\frac{t\times CF_t}{(1+y)^t} }{\Sigma_{t=1}^{n}\frac{CF_t}{(1+y)^t} }\]</div>
</div>
<div class="section" id="id9">
<h3>计算隐含收益率<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">算法</a><ul>
<li><a class="reference internal" href="#n">生成满足正态分布的N维度随机变量</a><ul>
<li><a class="reference internal" href="#id2">算法</a></li>
<li><a class="reference internal" href="#c">C++程序实现</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">各种统计量的计算方法</a><ul>
<li><a class="reference internal" href="#macaulay-duration">基金优先份额久期(Macaulay Duration)分析</a></li>
<li><a class="reference internal" href="#id9">计算隐含收益率</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="design.html"
                        title="previous chapter">模拟程序结构设计</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/algorithm.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="design.html" title="模拟程序结构设计"
             >previous</a> |</li>
        <li><a href="index.html">分级A份Monte Carlo模拟定价C++实现 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, 叶时炜.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>